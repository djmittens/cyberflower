# Session Notes — 2025-08-20

## Summary
- Rethemed the top banner and shared UI to a neon/HUD aesthetic while keeping vanilla JS + raw CSS and preserving search bindings.
- Prioritized Firefox performance: localized paint, transform-only hovers, avoided backdrop-filter and heavy shadow stacks.

## Key Changes
- Added tokens (exact spec) in `src/styles/theme-neon.css` and linked via `<html data-theme="neon">`.
- Added HUD utilities (exact spec) in `src/styles/hud.css` (panels, notches, φ split rows, bracket label, input box, chips, dotted grid overlay, focus helpers).
- Replaced legacy topbar/toolbar with HUD banner block in `src/index.html`:
  - Row 1: JP/EN brand (ネオングリッド / NEONGRID) + optional actions slot.
  - Row 2: Bracket label + cyan bracket-box input (`id="search"`, `data-search` kept) + compact chips.
- Applied notched hardware vibe to sidebar and modal (`u-notch u-inset-line`); kept dotted matrix overlay on main layout (`u-matrix`).

## Performance Notes (Firefox-first)
- Banner wrapper uses `contain: layout paint` to localize layout/paint work.
- Dotted grid overlay implemented as a lightweight background on the banner container (no backdrop-filter).
- Animations restricted to transform/opacity (chips hover); minimal single shadows.
- Large regions already use `content-visibility`/containment from earlier pass.

## Accessibility
- Visible focus rings (`hud-focus` styles) and explicit `<label for="search">` for the global search.
- JP brand segment is decorative (`aria-hidden="true"`), EN brand remains readable.
- Colors meet AA contrast on dark panels.

## Open Items / Next Session
- Wire HUD chips to real facets:
  - Toggle `state.active.type` (external/internal-team) on click.
  - Populate chip counts from `indexFacets()` instead of static placeholders.
- Optional: subtle HUD divider under banner (`::after`) per brief.
- Sweep legacy dashed borders to solid where appropriate for paint friendliness.
- Mobile polish: verify notch/label layout on small screens, keep tap targets ≥ 40px.
- Optional micro-interaction: brand underline/scanline (transform-only).

## Files Touched
- Added: `src/styles/theme-neon.css`, `src/styles/hud.css` (exact content as specified).
- Updated: `src/index.html` (linked CSS, new HUD banner block, `data-theme="neon"`, applied `u-notch u-inset-line` on sidebar/modal).

